{"ast":null,"code":"import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\nimport axios from 'axios';\nimport toast from 'react-hot-toast';\nconst API_URL = 'http://localhost:5000/api';\nexport const getCart = createAsyncThunk('cart/getCart', async (_, {\n  rejectWithValue\n}) => {\n  try {\n    const token = localStorage.getItem('token');\n    const response = await axios.get(`${API_URL}/cart`, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    });\n    return response.data;\n  } catch (error) {\n    var _error$response, _error$response$data;\n    return rejectWithValue((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message);\n  }\n});\nexport const addToCart = createAsyncThunk('cart/addToCart', async (itemData, {\n  rejectWithValue\n}) => {\n  try {\n    const token = localStorage.getItem('token');\n    const response = await axios.post(`${API_URL}/cart/add`, itemData, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    });\n    toast.success('Item added to cart');\n    return response.data;\n  } catch (error) {\n    var _error$response2, _error$response2$data;\n    const message = ((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : _error$response2$data.message) || 'Failed to add item';\n    toast.error(message);\n    return rejectWithValue(message);\n  }\n});\nexport const updateCartItem = createAsyncThunk('cart/updateCartItem', async ({\n  itemId,\n  quantity\n}, {\n  rejectWithValue\n}) => {\n  try {\n    const token = localStorage.getItem('token');\n    const response = await axios.put(`${API_URL}/cart/update/${itemId}`, {\n      quantity\n    }, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    });\n    return response.data;\n  } catch (error) {\n    var _error$response3, _error$response3$data;\n    return rejectWithValue((_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : (_error$response3$data = _error$response3.data) === null || _error$response3$data === void 0 ? void 0 : _error$response3$data.message);\n  }\n});\nexport const removeFromCart = createAsyncThunk('cart/removeFromCart', async (itemId, {\n  rejectWithValue\n}) => {\n  try {\n    const token = localStorage.getItem('token');\n    const response = await axios.delete(`${API_URL}/cart/remove/${itemId}`, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    });\n    toast.success('Item removed from cart');\n    return response.data;\n  } catch (error) {\n    var _error$response4, _error$response4$data;\n    return rejectWithValue((_error$response4 = error.response) === null || _error$response4 === void 0 ? void 0 : (_error$response4$data = _error$response4.data) === null || _error$response4$data === void 0 ? void 0 : _error$response4$data.message);\n  }\n});\nconst cartSlice = createSlice({\n  name: 'cart',\n  initialState: {\n    items: [],\n    totalItems: 0,\n    totalAmount: 0,\n    isLoading: false,\n    error: null\n  },\n  reducers: {\n    clearCart: state => {\n      state.items = [];\n      state.totalItems = 0;\n      state.totalAmount = 0;\n    }\n  },\n  extraReducers: builder => {\n    builder.addCase(getCart.fulfilled, (state, action) => {\n      state.items = action.payload.data.items;\n      state.totalItems = action.payload.data.totalItems;\n      state.totalAmount = action.payload.data.totalAmount;\n    }).addCase(addToCart.fulfilled, (state, action) => {\n      state.items = action.payload.data.items;\n      state.totalItems = action.payload.data.totalItems;\n      state.totalAmount = action.payload.data.totalAmount;\n    }).addCase(updateCartItem.fulfilled, (state, action) => {\n      state.items = action.payload.data.items;\n      state.totalItems = action.payload.data.totalItems;\n      state.totalAmount = action.payload.data.totalAmount;\n    }).addCase(removeFromCart.fulfilled, (state, action) => {\n      state.items = action.payload.data.items;\n      state.totalItems = action.payload.data.totalItems;\n      state.totalAmount = action.payload.data.totalAmount;\n    });\n  }\n});\nexport const {\n  clearCart\n} = cartSlice.actions;\nexport default cartSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","axios","toast","API_URL","getCart","_","rejectWithValue","token","localStorage","getItem","response","get","headers","Authorization","data","error","_error$response","_error$response$data","message","addToCart","itemData","post","success","_error$response2","_error$response2$data","updateCartItem","itemId","quantity","put","_error$response3","_error$response3$data","removeFromCart","delete","_error$response4","_error$response4$data","cartSlice","name","initialState","items","totalItems","totalAmount","isLoading","reducers","clearCart","state","extraReducers","builder","addCase","fulfilled","action","payload","actions","reducer"],"sources":["C:/Users/HP/Desktop/Classic/frontend/src/store/slices/cartSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\nimport axios from 'axios';\nimport toast from 'react-hot-toast';\n\nconst API_URL = 'http://localhost:5000/api';\n\nexport const getCart = createAsyncThunk('cart/getCart', async (_, { rejectWithValue }) => {\n  try {\n    const token = localStorage.getItem('token');\n    const response = await axios.get(`${API_URL}/cart`, {\n      headers: { Authorization: `Bearer ${token}` }\n    });\n    return response.data;\n  } catch (error) {\n    return rejectWithValue(error.response?.data?.message);\n  }\n});\n\nexport const addToCart = createAsyncThunk('cart/addToCart', async (itemData, { rejectWithValue }) => {\n  try {\n    const token = localStorage.getItem('token');\n    const response = await axios.post(`${API_URL}/cart/add`, itemData, {\n      headers: { Authorization: `Bearer ${token}` }\n    });\n    toast.success('Item added to cart');\n    return response.data;\n  } catch (error) {\n    const message = error.response?.data?.message || 'Failed to add item';\n    toast.error(message);\n    return rejectWithValue(message);\n  }\n});\n\nexport const updateCartItem = createAsyncThunk('cart/updateCartItem', async ({ itemId, quantity }, { rejectWithValue }) => {\n  try {\n    const token = localStorage.getItem('token');\n    const response = await axios.put(`${API_URL}/cart/update/${itemId}`, { quantity }, {\n      headers: { Authorization: `Bearer ${token}` }\n    });\n    return response.data;\n  } catch (error) {\n    return rejectWithValue(error.response?.data?.message);\n  }\n});\n\nexport const removeFromCart = createAsyncThunk('cart/removeFromCart', async (itemId, { rejectWithValue }) => {\n  try {\n    const token = localStorage.getItem('token');\n    const response = await axios.delete(`${API_URL}/cart/remove/${itemId}`, {\n      headers: { Authorization: `Bearer ${token}` }\n    });\n    toast.success('Item removed from cart');\n    return response.data;\n  } catch (error) {\n    return rejectWithValue(error.response?.data?.message);\n  }\n});\n\nconst cartSlice = createSlice({\n  name: 'cart',\n  initialState: {\n    items: [],\n    totalItems: 0,\n    totalAmount: 0,\n    isLoading: false,\n    error: null,\n  },\n  reducers: {\n    clearCart: (state) => {\n      state.items = [];\n      state.totalItems = 0;\n      state.totalAmount = 0;\n    },\n  },\n  extraReducers: (builder) => {\n    builder\n      .addCase(getCart.fulfilled, (state, action) => {\n        state.items = action.payload.data.items;\n        state.totalItems = action.payload.data.totalItems;\n        state.totalAmount = action.payload.data.totalAmount;\n      })\n      .addCase(addToCart.fulfilled, (state, action) => {\n        state.items = action.payload.data.items;\n        state.totalItems = action.payload.data.totalItems;\n        state.totalAmount = action.payload.data.totalAmount;\n      })\n      .addCase(updateCartItem.fulfilled, (state, action) => {\n        state.items = action.payload.data.items;\n        state.totalItems = action.payload.data.totalItems;\n        state.totalAmount = action.payload.data.totalAmount;\n      })\n      .addCase(removeFromCart.fulfilled, (state, action) => {\n        state.items = action.payload.data.items;\n        state.totalItems = action.payload.data.totalItems;\n        state.totalAmount = action.payload.data.totalAmount;\n      });\n  },\n});\n\nexport const { clearCart } = cartSlice.actions;\nexport default cartSlice.reducer;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}